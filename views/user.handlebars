<script src="/javascript/user.js"></script>
<script type="module" src="/javascript/userWorkoutsDisplay.js"></script>
<script type="module" src="/Views/workouts.js"></script>
<div>
    {{#if isLoggedIn}}
    <div class="container my-4 mx-auto logged-in-msg">
        <div class="border rounded-0 text-center">
            <p class="my-3">You are already logged in as <strong>{{displayName}}</strong>. Please sign out to login to another account.</p>
        </div>
    </div>
    {{/if}}
    <div>
        <div>
            <div class="container-fluid mx-auto mw-500">
                <div class="container-fluid mw-100 bg-gray p-0">
                    <div class="row mx-auto">
                         <button id="addWorkout" class="col add-button bg-gray p-2 border-right border-dark" onClick="revealWorkoutForm()">
                            <svg class="bg-white" width="36" height="36" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
                                <!-- Created with SVG-edit - https://github.com/SVG-Edit/svgedit-->
                                <g class="layer">
                                    <path d="m3.73713,17.63877c-0.06159,-2.63319 1.15037,-5.22023 3.18914,-6.69251c3.32405,-2.71835 7.71129,-3.95703 11.83529,-3.20862c2.04214,-0.33905 2.94595,1.94203 2.22754,3.69863c-1.11045,1.16847 -3.04197,0.05717 -4.48012,0.66151c-4.66257,0.64599 -9.26506,2.82715 -12.41628,6.65943c-0.01922,-0.40998 -0.50703,-0.68316 -0.35556,-1.11845l0,0zm0.05632,2.33673c0.24828,-1.85755 1.96998,-2.8247 3.16713,-3.95356c4.03015,-3.06909 9.08217,-4.28615 13.96761,-4.07974c0.12106,2.11643 -0.80456,4.1365 -1.91824,5.81315c-1.52923,0.91734 -3.43096,-0.1272 -5.05204,0.70786c-2.84319,0.74053 -6.00797,1.67358 -7.82774,4.34067c-0.66124,2.14175 -2.05886,-0.03818 -2.16698,-1.29873c-0.1537,-0.50083 -0.13232,-1.01534 -0.16973,-1.52965l0,0zm0.78061,-6.35175c0.24336,-2.33061 1.67096,-4.25769 2.98064,-6.03351c1.47633,-1.8926 3.48611,-3.28008 5.74461,-3.78837c1.79013,-0.50308 3.6351,-0.71237 5.47041,-0.92369c1.39185,1.15028 2.27725,3.15054 2.04404,5.04259c-1.08104,0.29462 -2.99244,-0.70145 -4.45014,-0.45855c-4.13416,0.0419 -8.3605,1.82469 -11.15436,5.15067c-0.23262,0.32096 -0.44177,0.6611 -0.63521,1.01085l0,0zm-0.2216,9.1938c1.54594,1.33385 1.59662,3.64567 2.54667,5.38582c-1.13881,-1.57742 -2.14123,-3.42027 -2.54667,-5.38582zm1.22415,1.27076c0.48496,-1.43777 2.00526,-3.45845 3.27369,-3.30818c0.50706,1.40531 0.72674,2.92801 1.55091,4.19489c2.21287,4.37068 6.26241,8.15171 11.07669,8.27075c0.7873,0.1717 2.87441,-0.39875 2.78959,-0.16273c-2.01216,1.06332 -4.34179,1.29649 -6.55889,1.21094c-4.11753,-0.29421 -8.21884,-2.42208 -10.69418,-6.02222c-0.70058,-1.29302 -1.09882,-2.7414 -1.43781,-4.18325l0,-0.0002zm3.38912,-3.66588c1.11103,-0.55596 3.19259,-2.2471 4.02746,-0.88406c2.03746,4.3178 5.48203,7.9892 9.72267,9.71567c2.20173,0.79034 4.6786,0.77789 6.82568,-0.20846c-0.89546,1.49596 -2.37725,2.45536 -3.77366,3.33656c-3.56891,1.63908 -7.883,0.75033 -10.89005,-1.80507c-2.91045,-2.47904 -5.1951,-6.02712 -5.90435,-9.98517l-0.00419,-0.09167l-0.00357,-0.07779l0,0l0,0zm1.48888,-15.54762c2.70103,-1.99897 6.0481,-2.93644 9.31284,-2.68742c-1.67117,1.14768 -3.76816,0.71168 -5.60068,1.33307c-1.27846,0.2995 -2.54742,0.70225 -3.71216,1.35435l0,0zm2.33222,14.08453c1.77829,-0.9057 3.80203,-0.891 5.72387,-0.76707c1.15864,1.94166 1.98484,4.19857 3.7839,5.59836c2.09661,2.01435 5.14749,2.58296 7.78926,1.63643c0.90722,-0.65947 1.91444,-0.23806 1.41899,1.07006c-0.59641,2.17197 -2.71407,3.12585 -4.65469,3.2312c-3.97025,0.42672 -7.60235,-2.00026 -10.28435,-4.93154c-1.56462,-1.68543 -2.8861,-3.65078 -3.77698,-5.83744l0,0zm6.0307,-16.14974c1.44707,-1.23529 3.41787,-0.11754 4.89853,0.47359c1.47269,1.35573 1.67004,3.61149 2.05922,5.53733c0.65067,4.52085 0.38748,9.37746 -1.57781,13.50415c-0.46964,1.44655 -1.81937,2.23015 -2.68447,0.66621c-1.00532,-1.19297 -1.77402,-2.58113 -2.49945,-3.97867c-0.42904,-1.33732 0.97534,-2.27998 1.26946,-3.50275c0.57306,-1.2191 0.71879,-2.59031 0.78312,-3.92457c0.27002,-1.99601 0.00437,-4.06667 -0.4835,-5.99935c-0.34213,-1.06943 -0.89773,-2.10522 -1.7651,-2.77595l0,0zm4.15924,21.35139c2.84861,-3.46273 3.30022,-8.37978 3.0858,-12.8066c-0.13055,-2.61004 -0.49944,-5.30727 -1.77858,-7.58025c1.32183,0.04404 2.74348,1.37997 3.77916,2.36379c2.93532,4.01571 3.79851,9.89033 1.567,14.50439c-0.87781,1.86571 -2.06681,3.54971 -3.46265,5.00197c-1.16851,-0.10331 -2.35296,-0.57903 -3.19073,-1.4833l0,0zm3.24842,1.50331c3.06777,-3.18139 5.28942,-7.75379 4.62642,-12.44216c-0.26395,-2.19585 -1.00911,-4.31704 -2.12507,-6.17469c2.04386,1.37037 3.1803,3.79753 4.20251,6.05239c1.46947,3.9409 0.6706,8.74422 -1.95542,11.89396c-1.34859,0.82301 -3.25146,0.94898 -4.74843,0.67049zm5.05052,-0.73583c1.05239,-1.978 2.24651,-3.98316 2.35619,-6.3299c0.16357,-0.78463 -0.09013,1.53945 -0.17818,2.02843c-0.27989,1.72687 -0.64536,3.56993 -1.64005,4.97891c-0.22885,-0.13659 -0.12676,-0.80178 -0.53796,-0.67744l0,0z" fill="#000000" fill-opacity="0" id="svg_10" stroke="#000000" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null"/>
                                </g>
                            </svg>
                            Add a Workout
                        </button>
                        <button class="col add-button bg-gray p-2 border-left border-dark" onClick="revealUpdateForm()">
                            <svg class="bg-white" width="36" height="36" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
                                <!-- Created with SVG-edit - https://github.com/SVG-Edit/svgedit-->
                                <g class="layer">
                                    <rect fill="#000000" fill-opacity="0" height="24" id="svg_1" stroke="#7c7c7c" width="24" x="5.87339" y="6.62661"/>
                                    <line fill="none" fill-opacity="0" id="svg_25" stroke="#ffffff" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null" transform="rotate(0.721413 29.494 12.1573)" x1="25.96279" x2="33.02529" y1="15.56357" y2="8.75107"/>
                                    <rect fill="#ffffff" height="6.90418" id="svg_21" stroke="#7c7c7c" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null" transform="rotate(-43.1615 24.3632 10.8922)" width="22.05476" x="13.33585" y="7.44015"/>
                                    <path d="m10.8953,22.14409l3.21067,-5.37758l3.21067,5.37758l-6.42134,0z" fill="#7a7a7a" id="svg_20" stroke="#7c7c7c" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null" stroke-width="null" transform="rotate(-12.841 14.106 19.4553)"/>
                                    <line fill="none" fill-opacity="0" id="svg_22" stroke="#7c7c7c" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null" x1="26.78045" x2="31.21795" y1="4.20108" y2="8.82608"/>
                                    <line fill="none" fill-opacity="0" id="svg_2" stroke="#ffffff" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null" transform="rotate(0.721413 22.2173 6.79978)" x1="18.6861" x2="25.7486" y1="10.20603" y2="3.39353"/>
                                </g>
                            </svg>
                            Add an Update
                        </button>
                    </div>
                </div>
                <div id="workoutForm" class="border mt-2" style="display: none">
                    <div class="card-body">
                        <div id="errMsg"></div>
                        <form id="addWorkoutForm">
                            <div class="form-group">
                                <label for="workoutType">Select Workout Type</label>
                                <select class="form-control" name="workoutType" id="workoutType">
                                    <option value="strength">Strength</option>
                                    <option value="cardio">Cardio</option>
                                    <option value="mixed">Mixed</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div class="container fluid px-0">
                                    <div class="row flex-column flex-sm-row">
                                        <div class="col">
                                            <label for="datepicker" class="mr-2">Date</label>
                                            <input type="text" id="datepicker" name="datepicker" class="form-control" placeholder="MM/DD/YYYY">
                                        </div>
                                        <div class="col-sm-7 mt-2 mt-sm-0">
                                            <label class="mr-2">Time (Optional)</label>
                                            <div class="row align-items-center mx-0">
                                                <input type="text" class="form-control text-center col" name="timeHour" id="timeHour" placeholder="HH" maxlength="2"/>
                                                <span class="px-1">:</span>
                                                <input type="text" class="form-control text-center col" id="timeMinute" name="timeMinute" placeholder="MM" maxlength="2"/>
                                                <!--
                                                <script>
                                                    for (let i = 1; i < 60; i++){
                                                        let valString = i < 10 ? '0' + i.toString() : i.toString();
                                                        let opt = "<option value=\"" + i + "\">" + valString + "<//option>";
                                                        $("#minutes").append(opt);
                                                    }
                                                </script> -->
                                                <select class="form-control col" name="timeAMPM" id="timeAMPM">
                                                    <option value="AM">AM</option>
                                                    <option value="PM">PM</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="description">Description of Workout</label>
                                <textarea type="text" rows="4" class="form-control" name="description" id="description" placeholder="Deadlift 5x5 150lbs&#10 50min 7mi run"></textarea>
                            </div>
                            <div class="form-check pl-0">
                                <label class="form-check-label" for="workoutCompleteCB">
                                    Workout Completed?
                                </label>
                                <input class="form-check-input ml-2" type="checkbox" value="completed" id="workoutCompleteCB">
                            </div>
                            <div class="mw-100 text-center mt-4">
                                <button type="submit" class="btn btn-success mw-100 mx-auto" onClick="event.preventDefault(); addWorkout();">Post</button>
                                <button class="btn btn-danger mw-100 mx-auto" onClick="event.preventDefault(); closeWorkoutForm()">Cancel</button>
                            </div> 
                        </form>
                    </div>
                </div>
                <div id="updateForm" class="border mt-2" style="display: none">
                    <div class="card-body">
                        <div id="update-errMsg"></div>
                        <form id="addUpdateForm">
                            <div class="form-group">
                                <div class="container fluid px-0 w-50p m-0">
                                    <label for="update-datepicker" class="mr-2">Date</label>
                                    <input type="text" id="update-datepicker" name="update-datepicker" class="form-control" placeholder="MM/DD/YYYY">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="update-description">Update</label>
                                <textarea type="text" rows="8" class="form-control" name="update-description" id="update-description" placeholder="After 3 weeks of running, I lost 7 lbs already..."></textarea>
                            </div>
                            <div class="mw-100 text-center mt-4">
                                <button type="submit" class="btn btn-success mw-100 mx-auto" onClick="event.preventDefault(); addUpdate();">Post</button>
                                <button class="btn btn-danger mw-100 mx-auto" onClick="event.preventDefault(); closeUpdateForm()">Cancel</button>
                            </div> 
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <div class="container-fluid border rounded mx-auto my-3 mw-650">
                <div class="row mx-auto mt-2">
                    <p class="mx-auto mb-0 font-150 font-bold">Incomplete Workouts</p>
                    <button type="button" id="postHistReload" class="btn bg-white" style="z-index: 5;"><i class="fas fa-redo"></i></button>
                </div>
                <div class="row mx-auto" id="workoutDisplay"></div>
                <div class="row text-center">
                    <div class="col"></div>
                    <div class="col-8 col-sm-6">
                    <div class="row my-3">
                        <button class="col page-link" id="prev" disabled><i class="fas fa-angle-double-left pr-1"></i>Prev</button>
                        <div class="col-4 col-lg-4"><p class="my-2" id="pageNum">Page 1</p></div>
                        <button class="col page-link" id="next">Next<i class="fas fa-angle-double-right pl-1"></i></button>
                    </div>
                    </div>
                    <div class="col"></div>
                </div>
            </div>
        </div>
    </div>
    <div id="deleteModal" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Are you sure you want to delete this workout</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary deleteWorkout" data-dismiss="modal">Delete Workout</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
    </div>
</div>